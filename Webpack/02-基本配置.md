# 基本配置

## Entry

### entry

1. entry 是配置模块的入口，可抽象成输入
2. entry是必填的

#### Entry类型

```JS
// string
'./src/main.js'

// array
// 搭配output.library使用时，只有最后一个会被导出
['./src/main1.js', './src/main2.js']

// object
{
    'a': './src/main.js',
    'b': ['./src/main1.js', './src/main2.js']
}
```

#### Chunk名称

1. string和array：生成一个chunk，名称为main
2. object：可能生成多个chunk，名称为key值

### context

相对路径的根目录设置，默认值为执行webpack的工作目录

```JS
module.exports = {
    context: path.resolve(__dirname， 'app')
}
```

1. 必须为一个绝对路径的字符串
2. 可以在启动webpack时带上参数--context

## Output（output）

### filename

配置输出文件名称

单个文件可以设置为静态

```JS
filename: 'bundle.js'
```

多个文件则需要借助模板和变量

```JS
filename: '[name].js'
```

除了name还有其它的内置变量设置名称

1. id：唯一标识
2. name：chunk名称
3. hash：chunk的唯一标识的Hash值
4. chunkhash：Chunk内容的Hash值

其中hash相关的变量长度可以指定

```JS
filename: '[hash:8].js'
```

### chunkFilename

没有配置入口的Chunk的输出名称，与filename类似

### path

设置输出文件存放在本地的目录，必须是string类型的绝对路径

```JS
path: path.resolve(__dirname, './dist'),
```

### publicPath

项目可能会构建一些需要异步加载的资源，这些资源的加载需要对应的URL地址

配置发布到线上资源的URL前缀，但是使用需要注意，可能会404

```JS
filename: '[name]_[chunkhash:8] .js'
publicPath: 'https://cdn.example.com/assets/'
```

此时线上的HTML的地址需要改为

```HTML
<script src='https://cdn.example.com/assets/a_12345678.js'></script>
```

### library 和 libraryTarget

构建一个可以被其他模块导入使用的库

#### library

配置导出库的名称

```JS
library: "LibraryName",
```

#### libraryTarget

以何种方式导出库

var（默认）

```JS
var LibraryName = lib_code
```

commonjs

```JS
exports['LibraryName'] = lib_code
```

commonjs2

```JS
module.exports = lib_code
```

this

```JS
this['LibraryName'] = lib_code
```

window

```JS
window['LibraryName'] = lib_code
```

global

```JS
global['LibraryName'] = lib_code
```

### libraryExport

配置要导出的模块中那些子模块需要导出

```JS
module.exports = lib_code['a']
```

## Module（module）

### rules

配置lodader

配置方式
1. 条件匹配：通过test、include和exclude配置要应用的规则
2. 应用规则：use设置匹配文件的Loader
3. 重置顺序：默认从右往左

但是重置顺序可以用loader配置的enforce更改
1. post：最后
2. pre最前

```JS
rules: [{
    test: /\.scss$/,
    use: ["style-loader",
        {
            loader: "css-loader"
        },
        {
            loader: "sass-loader"
            enforce: 'post' // 强制第一位
        }
    ],
    exclude: path.resolve(dirname, 'node modules'),
}]
```

### noParse

用于忽略部分没有采用模块化的文件的递归解析和处理，提高构建性能

```JS
noParse: /jquery|chart.js/
```

参数配置有三种

```
// 正则
RegExp
// 正则数组
[RegExp]
// 函数
function
```

### parser

更加细粒度地配置那些模块语法被解析，可以精确到语法层面

```JS
rules: [
    test: /\.js／ ， 
    use: [’babel - loader’],
    parser: {
        amd: false // 禁用 AMD
        commonjs: false, // 禁用 CommonJS
        system: false, // 禁用 SystemJS
        harmony: false, // 禁 ES6 import/export
        requireinclude: false, // 禁用 require.include
        requireEnsure: false, // 禁用 require ens ur
        requireContext: false, // 禁 require.context
        browserify: false, // 禁 browserify
        requireJs: false, //禁用 requirejs
    }
]
```

## Resolve（resolve）

配置Webpack寻找对应模块文件

### alias

利用别名将原导入路径映射为新导入路径

```JS
alias: {
    components: './src/component/'
}
```

### mainFields

部分模块会针对不同环境提供几份代码，用于配置使用那种代码

```JS
mainFields: ['browser', 'main']
```

会按照顺序寻找到第一个可用的

### extensions

自动补充导入语句的文件后缀

```JS
extensions: ['json', 'js']
```

### modules

设置webpack去哪些目录下寻找第三方模块

```JS 
modules: ['./src/components', 'node_modules']

```

### descriptionFiles

配置描述第三方模块的文件名称，即package.json名称

### enforceExtension

设置为true，则强制路径增加后缀

### enforceModuleExtension

类似enforceExtension，但是只作用于node_modules

## Plugin（plugins）

扩展webpack的功能

不同的插件配置方式都不同

## DevServer（devServer）

### hot

是否开启模块热替换功能

### historyApiFallback

方便地开发使用HTML5 History API单页应用

### static

配置从目录提供静态文件的选项

### headers

在HTTP响应中注入一些HTTP响应头

### host

配置服务监听地址

### port

服务监听端口，默认8080

## 其他配置项（module.exports）

### Target

配置构建不同运行环境中的代码

```JS
target: 'node'
```

### Devtool

配置source-map

```JS
devtool: 'eval-source-map'
```

### Watch和WatchOptions

watch打开监听模式

```JS
watch: true
```

WatchOptions控制监听模式

```JS
watchOptions: {
    aggregateTimeout: 300,
    poll: 1000
}
```

### Externals

告诉webpack运行环境已经内置了那些全局变量，无需打包

### Resolveloader

配置如何寻找Loader
