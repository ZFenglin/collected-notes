<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.25.0/themes/prism.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.2.0/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@6.7.0"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.2.7"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.2.0/dist/index.umd.min.js"></script><script>(r => {
                setTimeout(r);
              })(() => {
  const {
    markmap,
    mm
  } = window;
  const toolbar = new markmap.Toolbar();
  toolbar.attach(mm);
  const el = toolbar.render();
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, data) => {
        const {
          Markmap
        } = getMarkmap();
        window.mm = Markmap.create('svg#mindmap', getOptions == null ? void 0 : getOptions(), data);
      })(() => window.markmap,null,{"t":"heading","d":1,"p":{"lines":[0,1]},"v":"相关概念","c":[{"t":"heading","d":2,"p":{"lines":[2,3]},"v":"Vue3新特性","c":[{"t":"heading","d":3,"p":{"lines":[4,5]},"v":"TypeScript 重构","c":[{"t":"list_item","d":5,"p":{"lines":[6,7],"index":1},"v":"1. 由于Flow不再维护，同时由于大环境驱使，不同于Vue2使用的Flow，Vue3采用了TypeScript重写"},{"t":"list_item","d":5,"p":{"lines":[7,8],"index":2},"v":"2. 同时类型系统带来了更方便的提示，并且让我们的代码能够更健壮"}]},{"t":"heading","d":3,"p":{"lines":[9,10]},"v":"项目管理结构","c":[{"t":"list_item","d":5,"p":{"lines":[13,14],"index":1},"v":"1. Vue3使用Monorepo管理项目结构，每个模块都可以单独发布和使用"},{"t":"list_item","d":5,"p":{"lines":[14,15],"index":2},"v":"2. Vue3中响应式独立处理啊，与Vue解耦，甚至可以在React中使用"},{"t":"list_item","d":5,"p":{"lines":[15,16],"index":3},"v":"3. 渲染逻辑拆成两个部分","c":[{"t":"list_item","d":7,"p":{"lines":[16,17],"index":1},"v":"1. 平台无关的渲染逻辑"},{"t":"list_item","d":7,"p":{"lines":[17,18],"index":2},"v":"2. 浏览器渲染API"}]}]},{"t":"heading","d":3,"p":{"lines":[23,24]},"v":"新组件","c":[{"t":"list_item","d":5,"p":{"lines":[26,27],"index":1},"v":"1. Fragment: Vue3组件不再要求有一个唯一的根节点，清除了很多无用的占位div"},{"t":"list_item","d":5,"p":{"lines":[27,28],"index":2},"v":"2. Teleport: 允许组件渲染在别的元素内，主要开发弹窗组件的时候特别有用"},{"t":"list_item","d":5,"p":{"lines":[28,29],"index":3},"v":"3. Suspense: 异步组件，更方便开发有异步请求的组件（可以用于骨架屏）"}]},{"t":"heading","d":3,"p":{"lines":[30,31]},"v":"响应式系统","c":[{"t":"list_item","d":5,"p":{"lines":[32,33],"index":1},"v":"1. 由于Vue2使用Object.defineProperty存在缺陷，Vue3使用Proxy进行更换"},{"t":"list_item","d":5,"p":{"lines":[33,34],"index":2},"v":"2. 使用Proxy代表了框架将会越来越多拥抱浏览器新特性"}]},{"t":"heading","d":3,"p":{"lines":[37,38]},"v":"CompositionAPI","c":[{"t":"list_item","d":5,"p":{"lines":[39,40],"index":1},"v":"1. CompositionAPI将各功能模块的代码可以放在一起处理，便于后续调试和修改"},{"t":"list_item","d":5,"p":{"lines":[40,41],"index":2},"v":"2. 同时也提供OptionsAPI"}]},{"t":"heading","d":3,"p":{"lines":[44,45]},"v":"Vite","c":[{"t":"list_item","d":5,"p":{"lines":[46,47],"index":1},"v":"1. Vite是Webpack一种替代"},{"t":"list_item","d":5,"p":{"lines":[47,48],"index":2},"v":"2. 取消了Webpack的预打包，利用ES6的import实现按需编译，极大提升了开发体验"}]}]},{"t":"heading","d":2,"p":{"lines":[51,52]},"v":"Vue3性能提升总结","c":[{"t":"heading","d":3,"p":{"lines":[53,54]},"v":"响应式系统升级","c":[{"t":"list_item","d":5,"p":{"lines":[55,56],"index":1},"v":"1. vue2采用defineProperty"},{"t":"list_item","d":5,"p":{"lines":[56,57],"index":2},"v":"2. vue3中使用了Proxy对象重写响应式","c":[{"t":"list_item","d":7,"p":{"lines":[57,58],"index":1},"v":"1. 监听动态新增属性"},{"t":"list_item","d":7,"p":{"lines":[58,59],"index":2},"v":"2. 监听属性删除"},{"t":"list_item","d":7,"p":{"lines":[59,60],"index":3},"v":"3. 监听数组的索引和length属性"}]}]},{"t":"heading","d":3,"p":{"lines":[61,62]},"v":"编译优化","c":[{"t":"list_item","d":5,"p":{"lines":[63,64],"index":1},"v":"1. vue2中标记静态根节点，优化diff"},{"t":"list_item","d":5,"p":{"lines":[64,65],"index":2},"v":"2. vue3标记和提升静态根节点，diff只需要对比动态节点内容","c":[{"t":"list_item","d":7,"p":{"lines":[65,66],"index":1},"v":"1. Fragments：无需创建最外层根节点"},{"t":"list_item","d":7,"p":{"lines":[66,67],"index":2},"v":"2. 静态提升：将文本标签提升到外层缓存，后续无需重新创建直接使用"},{"t":"list_item","d":7,"p":{"lines":[67,68],"index":3},"v":"3. Patch flag：createVNode会传入动态属性名，后续只检查传入的属性名对象"},{"t":"list_item","d":7,"p":{"lines":[68,69],"index":4},"v":"4. 缓存事件处理函数：会将事件缓存至_cache"}]}]},{"t":"heading","d":3,"p":{"lines":[70,71]},"v":"源码体积的优化","c":[{"t":"list_item","d":5,"p":{"lines":[72,73],"index":1},"v":"1. 移除不常用的API，如filter等"},{"t":"list_item","d":5,"p":{"lines":[73,74],"index":2},"v":"2. TreeSharking支持"}]}]},{"t":"heading","d":2,"p":{"lines":[75,76]},"v":"Vue2升级Vue3","c":[{"t":"heading","d":3,"p":{"lines":[81,82]},"v":"利用@vue/compat","c":[{"t":"fence","d":4,"v":"<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 引入compat</span>\n<span class=\"token string-property property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">-</span><span class=\"token string\">\"vue\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.6.12\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">+</span><span class=\"token string\">\"vue\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.2.19\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">+</span><span class=\"token string\">\"@vue/compat\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.2.19\"</span>\n        <span class=\"token spread operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token comment\">// vue.config.js</span>\n<span class=\"token comment\">// 利用别名替换</span>\nmodule<span class=\"token punctuation\">.</span><span class=\"token property-access\">exports</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">chainWebpack</span><span class=\"token operator\">:</span> <span class=\"token parameter\">config</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        config<span class=\"token punctuation\">.</span><span class=\"token property-access\">resolve</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">alias</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'vue'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'@vue/compat'</span><span class=\"token punctuation\">)</span><span class=\"token spread operator\">...</span><span class=\"token spread operator\">...</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"}]},{"t":"heading","d":3,"p":{"lines":[104,105]},"v":"利用gogocode"}]}]})</script>
</body>
</html>
