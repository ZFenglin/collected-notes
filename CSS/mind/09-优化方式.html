<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.2.0/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@6.7.0"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.2.7"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.2.0/dist/index.umd.min.js"></script><script>(r => {
                setTimeout(r);
              })(() => {
  const {
    markmap,
    mm
  } = window;
  const toolbar = new markmap.Toolbar();
  toolbar.attach(mm);
  const el = toolbar.render();
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, data) => {
        const {
          Markmap
        } = getMarkmap();
        window.mm = Markmap.create('svg#mindmap', getOptions == null ? void 0 : getOptions(), data);
      })(() => window.markmap,null,{"t":"heading","d":1,"p":{"lines":[0,1]},"v":"优化方式","c":[{"t":"heading","d":2,"p":{"lines":[4,5]},"v":"加载性能","c":[{"t":"heading","d":3,"p":{"lines":[6,7]},"v":"CSS压缩"},{"t":"heading","d":3,"p":{"lines":[10,11]},"v":"减少使用@import，替换为link"},{"t":"heading","d":3,"p":{"lines":[14,15]},"v":"雪碧图","c":[{"t":"ordered_list","d":4,"p":{"lines":[16,19],"start":1},"v":"","c":[{"t":"list_item","d":5,"p":{"lines":[16,17],"index":1},"v":"1. 将众多小图标放在一张大图中"},{"t":"list_item","d":5,"p":{"lines":[17,18],"index":2},"v":"2. 利用background-image，background-repeat和background-position组合展示对应图片"}]},{"t":"heading","d":4,"p":{"lines":[19,20]},"v":"雪碧图优点","c":[{"t":"list_item","d":6,"p":{"lines":[21,22],"index":1},"v":"1. 减少网页HTTP请求"},{"t":"list_item","d":6,"p":{"lines":[22,23],"index":2},"v":"2. 多张图片合为一张图所占大小会减少"}]},{"t":"heading","d":4,"p":{"lines":[24,25]},"v":"雪碧图缺点","c":[{"t":"list_item","d":6,"p":{"lines":[26,27],"index":1},"v":"1. 自适应不够好，高分辨率或宽屏下容易背景断裂"},{"t":"list_item","d":6,"p":{"lines":[27,28],"index":2},"v":"2. 开发维护麻烦"}]}]},{"t":"heading","d":3,"p":{"lines":[29,30]},"v":"图片懒加载","c":[{"t":"heading","d":4,"p":{"lines":[31,32]},"v":"浏览器尺寸","c":[{"t":"heading","d":5,"p":{"lines":[33,34]},"v":"window","c":[{"t":"list_item","d":7,"p":{"lines":[35,36],"index":1},"v":"1. 屏幕高度","c":[{"t":"list_item","d":9,"p":{"lines":[36,37],"index":1},"v":"1. window.screen.height"}]},{"t":"list_item","d":7,"p":{"lines":[37,38],"index":2},"v":"2. 浏览器可视区的高度","c":[{"t":"list_item","d":9,"p":{"lines":[38,39],"index":1},"v":"1. window.innerHeight"}]}]},{"t":"heading","d":5,"p":{"lines":[40,41]},"v":"document","c":[{"t":"list_item","d":7,"p":{"lines":[42,43],"index":1},"v":"1. 浏览器滚动的过的距离","c":[{"t":"list_item","d":9,"p":{"lines":[43,44],"index":1},"v":"1. document.body.scrollTop"},{"t":"list_item","d":9,"p":{"lines":[44,45],"index":2},"v":"2. document.documentElement.scrollTop"}]},{"t":"list_item","d":7,"p":{"lines":[45,46],"index":2},"v":"2. body高度","c":[{"t":"list_item","d":9,"p":{"lines":[46,47],"index":1},"v":"1. document.body.clientHeight"}]}]},{"t":"heading","d":5,"p":{"lines":[48,49]},"v":"element","c":[{"t":"list_item","d":7,"p":{"lines":[50,51],"index":1},"v":"1. 元素距离顶端高度","c":[{"t":"list_item","d":9,"p":{"lines":[51,52],"index":1},"v":"1. element.offsetTop"}]}]}]},{"t":"heading","d":4,"p":{"lines":[53,54]},"v":"计算是否可见","c":[{"t":"list_item","d":6,"p":{"lines":[55,56],"index":1},"v":"1. img.offsetTop &lt; window.innerHeight + document.body.scrollTop"}]}]}]},{"t":"heading","d":2,"p":{"lines":[59,60]},"v":"CSS使用优化","c":[{"t":"heading","d":3,"p":{"lines":[61,62]},"v":"优先简写样式"},{"t":"heading","d":3,"p":{"lines":[65,66]},"v":"去除空规则"},{"t":"heading","d":3,"p":{"lines":[69,70]},"v":"属性值设置","c":[{"t":"list_item","d":5,"p":{"lines":[71,72],"index":1},"v":"1. CSS属性值为0时，不加单位"},{"t":"list_item","d":5,"p":{"lines":[72,73],"index":2},"v":"2. 属性值为浮动小数0.xx，可以省略小数点之前的0"}]},{"t":"heading","d":3,"p":{"lines":[74,75]},"v":"回流与重绘优化：<a href=\"../浏览器原理/03-渲染原理.md\">详见浏览器原理/渲染原理</a>"},{"t":"heading","d":3,"p":{"lines":[76,77]},"v":"慎重使用高性能属性（浮动和定位）"},{"t":"heading","d":3,"p":{"lines":[80,81]},"v":"正确使用display的属性，防止样式失效"},{"t":"heading","d":3,"p":{"lines":[84,85]},"v":"不滥用web字体"},{"t":"heading","d":3,"p":{"lines":[88,89]},"v":"<a href=\"https://lz5z.com/Web%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-CSS3%E7%A1%AC%E4%BB%B6%E5%8A%A0%E9%80%9F/\">GPU加速</a>","c":[{"t":"ordered_list","d":4,"p":{"lines":[90,93],"start":1},"v":"","c":[{"t":"list_item","d":5,"p":{"lines":[90,91],"index":1},"v":"1. GPU加速会产生新的图层，并放到GPU中处理"},{"t":"list_item","d":5,"p":{"lines":[91,92],"index":2},"v":"2. 不会触发重绘和重排"}]},{"t":"heading","d":4,"p":{"lines":[93,94]},"v":"复合图层创建情形","c":[{"t":"list_item","d":6,"p":{"lines":[95,96],"index":1},"v":"1. 3D CSS transform"},{"t":"list_item","d":6,"p":{"lines":[96,97],"index":2},"v":"2. video 和 canvas 标签"},{"t":"list_item","d":6,"p":{"lines":[97,98],"index":3},"v":"3. CSS filters"},{"t":"list_item","d":6,"p":{"lines":[98,99],"index":4},"v":"4. 元素覆盖时，使用了 z-index 属性"}]},{"t":"heading","d":4,"p":{"lines":[100,101]},"v":"强制触发GPU加速","c":[{"t":"list_item","d":6,"p":{"lines":[102,103],"index":1},"v":"1. 3D 的 transform"},{"t":"list_item","d":6,"p":{"lines":[103,104],"index":2},"v":"2. opacity"},{"t":"list_item","d":6,"p":{"lines":[104,105],"index":3},"v":"3. filter"},{"t":"list_item","d":6,"p":{"lines":[105,106],"index":4},"v":"4. will-change"}]},{"t":"heading","d":4,"p":{"lines":[107,108]},"v":"2D和3D CSS transform区别","c":[{"t":"list_item","d":6,"p":{"lines":[109,110],"index":1},"v":"1. 3D渲染前便会产生新的图层"},{"t":"list_item","d":6,"p":{"lines":[110,111],"index":2},"v":"2. 2D是在运行时产生图层，运行结束时删除图层"}]},{"t":"heading","d":4,"p":{"lines":[112,113]},"v":"GPU加速缺点","c":[{"t":"list_item","d":6,"p":{"lines":[114,115],"index":1},"v":"1. 过多地开启硬件加速可能会耗费较多的内存"},{"t":"list_item","d":6,"p":{"lines":[115,116],"index":2},"v":"2. GPU 渲染会影响字体的抗锯齿效果"}]},{"t":"heading","d":4,"p":{"lines":[117,118]},"v":"translate替代绝对定位修改位置","c":[{"t":"list_item","d":6,"p":{"lines":[119,120],"index":1},"v":"1. 触发复合（compositions）","c":[{"t":"list_item","d":8,"p":{"lines":[120,121],"index":1},"v":"1. transform 或 opacity只触发复合"},{"t":"list_item","d":8,"p":{"lines":[121,122],"index":2},"v":"2. 定位则会触发布局（reflow）或重绘（repaint），进而触发复合"}]},{"t":"list_item","d":6,"p":{"lines":[122,123],"index":2},"v":"2. GPU图层","c":[{"t":"list_item","d":8,"p":{"lines":[123,124],"index":1},"v":"1. transform 使浏览器为元素创建⼀个 GPU 图层"},{"t":"list_item","d":8,"p":{"lines":[124,125],"index":2},"v":"2. 改变绝对定位会使⽤到 CPU"}]},{"t":"list_item","d":6,"p":{"lines":[125,126],"index":3},"v":"3. 原始空间占据","c":[{"t":"list_item","d":8,"p":{"lines":[126,127],"index":1},"v":"1. translate 改变位置时，元素依然会占据其原始空间"},{"t":"list_item","d":8,"p":{"lines":[127,128],"index":2},"v":"2. 绝对定位不会"}]}]}]}]},{"t":"heading","d":2,"p":{"lines":[129,130]},"v":"选择器性能","c":[{"t":"heading","d":3,"p":{"lines":[131,132]},"v":"ID选择器作为其关键选择器，则不要为规则增加标签","c":[{"t":"heading","d":4,"p":{"lines":[133,134]},"v":"关键选择器","c":[{"t":"list_item","d":6,"p":{"lines":[135,136],"index":1},"v":"1. 选择器的最后面的部分为关键选择器（即用来匹配目标元素的部分）"},{"t":"list_item","d":6,"p":{"lines":[136,137],"index":2},"v":"2. CSS选择符是从右到左进行匹配的"},{"t":"list_item","d":6,"p":{"lines":[137,138],"index":3},"v":"3. 使用后代选择器的时候，浏览器会遍历所有子元素来确定是否是指定的元素"}]}]},{"t":"heading","d":3,"p":{"lines":[139,140]},"v":"利用CSS继承，减少重复设定CSS属性"},{"t":"heading","d":3,"p":{"lines":[141,142]},"v":"减少使用部分选择器","c":[{"t":"list_item","d":5,"p":{"lines":[143,144],"index":1},"v":"1. 少用通配规则"},{"t":"list_item","d":5,"p":{"lines":[144,145],"index":2},"v":"2. 少用元素选择器"},{"t":"list_item","d":5,"p":{"lines":[145,146],"index":3},"v":"3. 少用后代选择器"}]},{"t":"heading","d":3,"p":{"lines":[149,150]},"v":"选择器优化嵌套，尽量避免层级过深"}]},{"t":"heading","d":2,"p":{"lines":[151,152]},"v":"可维护和健壮性","c":[{"t":"list_item","d":4,"p":{"lines":[153,154],"index":1},"v":"1. 将具有相同属性的样式抽离出来，整合到一个class中"},{"t":"list_item","d":4,"p":{"lines":[154,155],"index":2},"v":"2. 样式与内容分离，CSS代码定义到外部CSS文件中"}]}]})</script>
</body>
</html>
