<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.25.0/themes/prism.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.2.0/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@6.7.0"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.2.7"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.2.0/dist/index.umd.min.js"></script><script>(r => {
                setTimeout(r);
              })(() => {
  const {
    markmap,
    mm
  } = window;
  const toolbar = new markmap.Toolbar();
  toolbar.attach(mm);
  const el = toolbar.render();
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, data) => {
        const {
          Markmap
        } = getMarkmap();
        window.mm = Markmap.create('svg#mindmap', getOptions == null ? void 0 : getOptions(), data);
      })(() => window.markmap,null,{"t":"heading","d":1,"p":{"lines":[0,1]},"v":"面试题","c":[{"t":"heading","d":2,"p":{"lines":[2,3]},"v":"前端路由理解","c":[{"t":"heading","d":3,"p":{"lines":[4,5]},"v":"出现的前提","c":[{"t":"ordered_list","d":4,"p":{"lines":[6,11],"start":1},"v":"","c":[{"t":"list_item","d":5,"p":{"lines":[6,7],"index":1},"v":"1. AJAX出现，允许不刷新浏览器的情况下更新页面，促使SPA出现"},{"t":"list_item","d":5,"p":{"lines":[7,8],"index":2},"v":"2. SPA存在问题","c":[{"t":"list_item","d":7,"p":{"lines":[8,9],"index":1},"v":"1. 不会记住用户操作"},{"t":"list_item","d":7,"p":{"lines":[9,10],"index":2},"v":"2. SEO不友好"}]}]},{"t":"heading","d":4,"p":{"lines":[11,12]},"v":"两个问题","c":[{"t":"list_item","d":6,"p":{"lines":[13,14],"index":1},"v":"1. SPA无法记住用户操作问题"},{"t":"list_item","d":6,"p":{"lines":[14,15],"index":2},"v":"2. 用户刷新页面如何不重复加载资源（服务端已经无法解决）"}]},{"t":"heading","d":4,"p":{"lines":[16,17]},"v":"前端路解决思路","c":[{"t":"list_item","d":6,"p":{"lines":[18,19],"index":1},"v":"1. 前端拦截用户刷新"},{"t":"list_item","d":6,"p":{"lines":[19,20],"index":2},"v":"2. 感知URL变化，渲染不同页面"}]}]}]},{"t":"heading","d":2,"p":{"lines":[21,22]},"v":"hash和history模式区别","c":[{"t":"heading","d":3,"p":{"lines":[23,24]},"v":"hash模式","c":[{"t":"heading","d":4,"p":{"lines":[27,28]},"v":"hash模式优势","c":[{"t":"list_item","d":6,"p":{"lines":[29,30],"index":1},"v":"1. hash值会出现在URL中，但是不会在HTTP请求中，浏览器的前进后退不会请求服务器"},{"t":"list_item","d":6,"p":{"lines":[30,31],"index":2},"v":"2. hash值的改动不会重新加载页面"},{"t":"list_item","d":6,"p":{"lines":[31,32],"index":3},"v":"3. 浏览器支持度好"}]},{"t":"heading","d":4,"p":{"lines":[33,34]},"v":"hash的监听","c":[{"t":"fence","d":5,"v":"<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> eventType <span class=\"token operator\">=</span> supportsPushState <span class=\"token operator\">?</span> <span class=\"token string\">'popstate'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'hashchange'</span>\n</code></pre>\n"}]}]},{"t":"heading","d":3,"p":{"lines":[39,40]},"v":"history模式","c":[{"t":"heading","d":4,"p":{"lines":[43,44]},"v":"history模式特点","c":[{"t":"list_item","d":6,"p":{"lines":[45,46],"index":1},"v":"1. 没有#更美观"},{"t":"list_item","d":6,"p":{"lines":[46,47],"index":2},"v":"2. 需要后台支持，没有配置正确则会返回404"}]},{"t":"heading","d":4,"p":{"lines":[48,49]},"v":"history监听","c":[{"t":"fence","d":5,"v":"<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'popstate'</span><span class=\"token punctuation\">,</span> handleRoutingEvent<span class=\"token punctuation\">)</span>\n</code></pre>\n"}]}]},{"t":"heading","d":3,"p":{"lines":[54,55]},"v":"hash和history更改URL","c":[{"t":"heading","d":4,"p":{"lines":[56,57]},"v":"相关浏览器API","c":[{"t":"list_item","d":6,"p":{"lines":[58,59],"index":1},"v":"1. 修改历史状态，但是页面不会刷新","c":[{"t":"list_item","d":8,"p":{"lines":[59,60],"index":1},"v":"1. pushState()"},{"t":"list_item","d":8,"p":{"lines":[60,61],"index":2},"v":"2. replaceState()"}]},{"t":"list_item","d":6,"p":{"lines":[61,62],"index":2},"v":"2. 切换历史状态","c":[{"t":"list_item","d":8,"p":{"lines":[62,63],"index":1},"v":"1. forward()"},{"t":"list_item","d":8,"p":{"lines":[63,64],"index":2},"v":"2. back()"},{"t":"list_item","d":8,"p":{"lines":[64,65],"index":3},"v":"3. go()"}]}]},{"t":"heading","d":4,"p":{"lines":[66,67]},"v":"两者跳转处理比较","c":[{"t":"fence","d":5,"v":"<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword module\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">pushState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url<span class=\"token punctuation\">,</span> replace</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">saveScrollPosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> history <span class=\"token operator\">=</span> <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">history</span>\n    <span class=\"token keyword control-flow\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>replace<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> stateCopy <span class=\"token operator\">=</span> <span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> history<span class=\"token punctuation\">.</span><span class=\"token property-access\">state</span><span class=\"token punctuation\">)</span>\n            stateCopy<span class=\"token punctuation\">.</span><span class=\"token property-access\">key</span> <span class=\"token operator\">=</span> <span class=\"token function\">getStateKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            history<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">replaceState</span><span class=\"token punctuation\">(</span>stateCopy<span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">else</span> <span class=\"token punctuation\">{</span>\n            history<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">pushState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token function\">setStateKey</span><span class=\"token punctuation\">(</span><span class=\"token function\">genStateKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">location</span><span class=\"token punctuation\">[</span>replace <span class=\"token operator\">?</span> <span class=\"token string\">'replace'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'assign'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"heading","d":5,"p":{"lines":[90,91]},"v":"hash","c":[{"t":"ordered_list","d":6,"p":{"lines":[93,96],"start":1},"v":"","c":[{"t":"list_item","d":7,"p":{"lines":[93,94],"index":1},"v":"1. 优先pushState"},{"t":"list_item","d":7,"p":{"lines":[94,95],"index":2},"v":"2. 不支持则window.location.hash直接修改"}]},{"t":"fence","d":6,"v":"<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">pushHash</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">path</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>supportsPushState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">pushState</span><span class=\"token punctuation\">(</span><span class=\"token function\">getUrl</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">location</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">hash</span> <span class=\"token operator\">=</span> path\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"}]},{"t":"heading","d":5,"p":{"lines":[106,107]},"v":"history","c":[{"t":"fence","d":6,"v":"<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">pushState</span><span class=\"token punctuation\">(</span><span class=\"token function\">cleanPath</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">base</span> <span class=\"token operator\">+</span> route<span class=\"token punctuation\">.</span><span class=\"token property-access\">fullPath</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n</code></pre>\n"}]},{"t":"heading","d":5,"p":{"lines":[114,115]},"v":"修改方式比较","c":[{"t":"heading","d":6,"p":{"lines":[118,119]},"v":"history.pushState()","c":[{"t":"list_item","d":8,"p":{"lines":[120,121],"index":1},"v":"1. 设置的新 URL 可以是与当前 URL 同源的任意 URL"},{"t":"list_item","d":8,"p":{"lines":[121,122],"index":2},"v":"2. 设置的新 URL 可以与当前 URL 一模一样，这样也会把记录添加到栈中"},{"t":"list_item","d":8,"p":{"lines":[122,123],"index":3},"v":"3. 通过 stateObject 参数可以添加任意类型的数据到记录中"},{"t":"list_item","d":8,"p":{"lines":[123,124],"index":4},"v":"4. 前端的url必须和实际向后端发起请求的url一致，如果没有对用的路由处理，将返回404错误"},{"t":"list_item","d":8,"p":{"lines":[124,125],"index":5},"v":"5. 可额外设置 title 属性供后续使用"}]},{"t":"heading","d":6,"p":{"lines":[126,127]},"v":"直接修改window.location.hash","c":[{"t":"list_item","d":8,"p":{"lines":[128,129],"index":1},"v":"1. 只可修改 # 后面的部分，因此只能设置与当前 URL 同文档的 URL"},{"t":"list_item","d":8,"p":{"lines":[129,130],"index":2},"v":"2. hash 设置的新值必须与原来不一样才会触发动作将记录添加到栈中"},{"t":"list_item","d":8,"p":{"lines":[130,131],"index":3},"v":"3. hash 只可添加短字符串"},{"t":"list_item","d":8,"p":{"lines":[131,132],"index":4},"v":"4. 仅hash符号之前的url会被包含在请求中，后端如果没有做到对路由的全覆盖，也不会返回404错误"}]}]}]}]}]},{"t":"heading","d":2,"p":{"lines":[133,134]},"v":"动态路由","c":[{"t":"fence","d":3,"v":"<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> routes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// 动态字段以冒号开始</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/users/:id'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">component</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">User</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span>\n</code></pre>\n"},{"t":"fence","d":3,"v":"<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 匹配模式</span>\n<span class=\"token string\">'/users/:username/posts/:postId'</span> <span class=\"token arrow operator\">=></span> <span class=\"token string\">'/users/eduardo/posts/123'</span>\n<span class=\"token comment\">// $route.params</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">username</span><span class=\"token operator\">:</span> <span class=\"token string\">'eduardo'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">postId</span><span class=\"token operator\">:</span> <span class=\"token string\">'123'</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"fence","d":3,"v":"<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> routes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// 将匹配所有内容并将其放在 `$route.params.pathMatch` 下</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/:pathMatch(.*)*'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'NotFound'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">component</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">NotFound</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 将匹配以 `/user-` 开头的所有内容，并将其放在 `$route.params.afterUser` 下</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/user-:afterUser(.*)'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">component</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">UserGeneric</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span>\n</code></pre>\n"}]},{"t":"heading","d":2,"p":{"lines":[177,178]},"v":"路由跳转方式","c":[{"t":"heading","d":3,"p":{"lines":[179,180]},"v":"param方式","c":[{"t":"heading","d":4,"p":{"lines":[185,186]},"v":"路由跳转","c":[{"t":"fence","d":5,"v":"<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>router-link</span> <span class=\"token attr-name\">:to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{ name: <span class=\"token punctuation\">'</span>user<span class=\"token punctuation\">'</span>, params: { username: <span class=\"token punctuation\">'</span>eduardo<span class=\"token punctuation\">'</span> }}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n</code></pre>\n"},{"t":"fence","d":5,"v":"<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">$router</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">username</span><span class=\"token operator\">:</span> <span class=\"token string\">'eduardo'</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</code></pre>\n"}]},{"t":"heading","d":4,"p":{"lines":[204,205]},"v":"参数获取","c":[{"t":"fence","d":5,"v":"<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">$route</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">params</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">username</span>\n</code></pre>\n"}]}]},{"t":"heading","d":3,"p":{"lines":[210,211]},"v":"query方式","c":[{"t":"heading","d":4,"p":{"lines":[214,215]},"v":"路由跳转","c":[{"t":"fence","d":5,"v":"<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>router-link</span> <span class=\"token attr-name\">:to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{ name: <span class=\"token punctuation\">'</span>/user<span class=\"token punctuation\">'</span>, query: { username: <span class=\"token punctuation\">'</span>eduardo<span class=\"token punctuation\">'</span> }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n</code></pre>\n"},{"t":"fence","d":5,"v":"<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">$router</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">query</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">username</span><span class=\"token operator\">:</span> <span class=\"token string\">'eduardo'</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">$router</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user?username='</span> <span class=\"token operator\">+</span> <span class=\"token string\">'eduardo'</span><span class=\"token punctuation\">)</span>\n</code></pre>\n"}]},{"t":"heading","d":4,"p":{"lines":[235,236]},"v":"参数获取","c":[{"t":"fence","d":5,"v":"<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">$route</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">query</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">username</span>\n</code></pre>\n"}]}]},{"t":"heading","d":3,"p":{"lines":[241,242]},"v":"params和query的区别","c":[{"t":"list_item","d":5,"p":{"lines":[243,244],"index":1},"v":"1. 用法","c":[{"t":"list_item","d":7,"p":{"lines":[244,245],"index":1},"v":"1. params要用name来引入"},{"t":"list_item","d":7,"p":{"lines":[245,246],"index":2},"v":"2. query要用path来引入"}]},{"t":"list_item","d":5,"p":{"lines":[246,247],"index":2},"v":"2. url地址显示","c":[{"t":"list_item","d":7,"p":{"lines":[247,248],"index":1},"v":"1. params则类似于post"},{"t":"list_item","d":7,"p":{"lines":[248,249],"index":2},"v":"2. query更加类似于get"}]},{"t":"list_item","d":5,"p":{"lines":[249,250],"index":3},"v":"3. 刷新数据丢失","c":[{"t":"list_item","d":7,"p":{"lines":[250,251],"index":1},"v":"1. params刷新会丢失params里面的数据"},{"t":"list_item","d":7,"p":{"lines":[251,252],"index":2},"v":"2. query刷新不会丢失query里面的数据"}]}]}]},{"t":"heading","d":2,"p":{"lines":[253,254]},"v":"路由守卫","c":[{"t":"heading","d":3,"p":{"lines":[255,256]},"v":"植入守卫方式","c":[{"t":"heading","d":4,"p":{"lines":[257,258]},"v":"全局前置/钩子","c":[{"t":"list_item","d":6,"p":{"lines":[259,260],"index":1},"v":"1. router.beforeEach：全局前置守卫"},{"t":"list_item","d":6,"p":{"lines":[260,261],"index":2},"v":"2. router.beforeResolve：全局解析守卫，beforeRouteEnter调用后调用"},{"t":"list_item","d":6,"p":{"lines":[261,262],"index":3},"v":"3. router.afterEach：全局后置钩子"}]},{"t":"heading","d":4,"p":{"lines":[263,264]},"v":"路由独享的守卫","c":[{"t":"list_item","d":6,"p":{"lines":[265,266],"index":1},"v":"1. 配置路由时添加"},{"t":"list_item","d":6,"p":{"lines":[266,267],"index":2},"v":"2. 只有beforeEnter，有三个参数∶ to、from、next"}]},{"t":"heading","d":4,"p":{"lines":[268,269]},"v":"组件内的守卫","c":[{"t":"list_item","d":6,"p":{"lines":[270,271],"index":1},"v":"1. beforeRouteEnter：进入组件前触发，访问不到this，因为该守卫执行前组件实例还没有被创建，传一个回调给 next来访问"},{"t":"list_item","d":6,"p":{"lines":[271,272],"index":2},"v":"2. beforeRouteUpdate：当前地址改变并且组件被复用时触发，/foo/1 和 /foo/2 之间跳转时会触发"},{"t":"list_item","d":6,"p":{"lines":[272,273],"index":3},"v":"3. beforeRouteLeave：离开组件被调用"}]}]},{"t":"heading","d":3,"p":{"lines":[274,275]},"v":"守卫执行流程","c":[{"t":"heading","d":4,"p":{"lines":[278,279]},"v":"解析b组件前","c":[{"t":"list_item","d":6,"p":{"lines":[280,281],"index":1},"v":"1. 触发进入其他路由"},{"t":"list_item","d":6,"p":{"lines":[281,282],"index":2},"v":"2. beforeRouteLeave：路由组件的组件离开路由前钩子，可取消路由离开"},{"t":"list_item","d":6,"p":{"lines":[282,283],"index":3},"v":"3. beforeEach：路由全局前置守卫，可用于登录验证、全局路由loading等"},{"t":"list_item","d":6,"p":{"lines":[283,284],"index":4},"v":"4. beforeRouteUpdate：在重用的组件里调用（2.2+）"},{"t":"list_item","d":6,"p":{"lines":[284,285],"index":5},"v":"5. beforeEnter：路由独享守卫"}]},{"t":"heading","d":4,"p":{"lines":[288,289]},"v":"解析b组件","c":[{"t":"list_item","d":6,"p":{"lines":[290,291],"index":1},"v":"1. 解析异步路由组件"},{"t":"list_item","d":6,"p":{"lines":[291,292],"index":2},"v":"2. beforeRouteEnter：路由组件的组件进入路由前钩子"},{"t":"list_item","d":6,"p":{"lines":[292,293],"index":3},"v":"3. beforeResolve：路由全局解析守卫（2.5+），标示解析阶段完成，此时导航被确认"},{"t":"list_item","d":6,"p":{"lines":[293,294],"index":4},"v":"4. afterEach：路由后置全局钩子"}]},{"t":"heading","d":4,"p":{"lines":[295,296]},"v":"b组件生命周期","c":[{"t":"list_item","d":6,"p":{"lines":[297,298],"index":1},"v":"1. 非重用组件，开始组件实例的生命周期：beforeCreate、created、beforeMount、（此处开始执行a的beforeDestroy和destroyed）、mounted"},{"t":"list_item","d":6,"p":{"lines":[298,299],"index":2},"v":"2. 触发 DOM 更新"},{"t":"list_item","d":6,"p":{"lines":[299,300],"index":3},"v":"3. 用创建好的实例调用 beforeRouteEnter守卫中传给 next 的回调函数"},{"t":"list_item","d":6,"p":{"lines":[300,301],"index":4},"v":"4. 导航完成"}]}]}]},{"t":"heading","d":2,"p":{"lines":[302,303]},"v":"其它","c":[{"t":"heading","d":3,"p":{"lines":[304,305]},"v":"路由懒加载","c":[{"t":"fence","d":4,"v":"<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token keyword module\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@/components/list.vue'</span><span class=\"token punctuation\">)</span>\n</code></pre>\n"},{"t":"fence","d":4,"v":"<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token parameter\">resolve</span> <span class=\"token arrow operator\">=></span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'@/components/list'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> resolve<span class=\"token punctuation\">)</span>\n</code></pre>\n"},{"t":"fence","d":4,"v":"<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token parameter\">r</span> <span class=\"token arrow operator\">=></span> require<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">ensure</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token function\">r</span><span class=\"token punctuation\">(</span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@/components/list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'list'</span><span class=\"token punctuation\">)</span>\n</code></pre>\n"}]},{"t":"heading","d":3,"p":{"lines":[324,325]},"v":"如何获取页面hash变化","c":[{"t":"list_item","d":5,"p":{"lines":[326,327],"index":1},"v":"1. watch深度监听$route的变化"},{"t":"list_item","d":5,"p":{"lines":[327,328],"index":2},"v":"2. window.location.hash读取#值"}]},{"t":"heading","d":3,"p":{"lines":[329,330]},"v":"<code>$route</code> 和 <code>$router</code> 的区别","c":[{"t":"list_item","d":5,"p":{"lines":[331,332],"index":1},"v":"1. $route：路由信息对象具有path，params，hash，query，fullPath，matched，name 等路由信息参数"},{"t":"list_item","d":5,"p":{"lines":[332,333],"index":2},"v":"2. $router：路由实例，包括了路由的跳转方法，钩子函数等"}]},{"t":"heading","d":3,"p":{"lines":[334,335]},"v":"Vue-router跳转和location.href区别","c":[{"t":"list_item","d":5,"p":{"lines":[336,337],"index":1},"v":"1. location.href= /url会造成页面刷新"},{"t":"list_item","d":5,"p":{"lines":[337,338],"index":2},"v":"2. history.pushState( /url )，仅改变URL，不刷新页面，vue-router使用的方式"}]}]}]})</script>
</body>
</html>
