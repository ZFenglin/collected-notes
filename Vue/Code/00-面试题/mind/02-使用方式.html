<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.25.0/themes/prism.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.2.0/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@6.7.0"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.2.7"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.2.0/dist/index.umd.min.js"></script><script>(r => {
                setTimeout(r);
              })(() => {
  const {
    markmap,
    mm
  } = window;
  const toolbar = new markmap.Toolbar();
  toolbar.attach(mm);
  const el = toolbar.render();
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, data) => {
        const {
          Markmap
        } = getMarkmap();
        window.mm = Markmap.create('svg#mindmap', getOptions == null ? void 0 : getOptions(), data);
      })(() => window.markmap,null,{"t":"heading","d":1,"p":{"lines":[0,1]},"v":"使用方式","c":[{"t":"heading","d":2,"p":{"lines":[2,3]},"v":"组件通信","c":[{"t":"heading","d":3,"p":{"lines":[4,5]},"v":"Vue不推荐子改父","c":[{"t":"list_item","d":5,"p":{"lines":[6,7],"index":1},"v":"1. Vue提倡父子组件间是单向数据流关系"},{"t":"list_item","d":5,"p":{"lines":[7,8],"index":2},"v":"2. 强行修改控制台vue会警告"},{"t":"list_item","d":5,"p":{"lines":[8,9],"index":3},"v":"3. 单向数据流破坏debug成本高"},{"t":"list_item","d":5,"p":{"lines":[9,10],"index":4},"v":"4. 可以通过$emit触发父组件的方法，由父组件自主修改"}]},{"t":"heading","d":3,"p":{"lines":[11,12]},"v":"组件通信方式","c":[{"t":"heading","d":4,"p":{"lines":[13,14]},"v":"props / <code>$emit</code>","c":[{"t":"list_item","d":6,"p":{"lines":[15,16],"index":1},"v":"1. 父组件向子组件传值","c":[{"t":"list_item","d":8,"p":{"lines":[16,17],"index":1},"v":"1. 父组件利用props向子组件传值，形成单向向下绑定"},{"t":"list_item","d":8,"p":{"lines":[17,18],"index":2},"v":"2. 可以定义一个或以上的数据，格式不限"}]},{"t":"list_item","d":6,"p":{"lines":[18,19],"index":2},"v":"2. 父组件监听，子组件触发","c":[{"t":"list_item","d":8,"p":{"lines":[19,20],"index":1},"v":"1. $emit绑定一个自定义事件，事件执行时就会把参数传递给父组件"},{"t":"list_item","d":8,"p":{"lines":[20,21],"index":2},"v":"2. 父组件通过v-on监听并接收参数"}]}]},{"t":"heading","d":4,"p":{"lines":[22,23]},"v":"依赖注入（provide / inject）","c":[{"t":"list_item","d":6,"p":{"lines":[24,25],"index":1},"v":"1. provide用于提供数据或方法，inject用于注入数据或方法"},{"t":"list_item","d":6,"p":{"lines":[25,26],"index":2},"v":"2. 注意！注入提供的属性是非响应式的"}]},{"t":"heading","d":4,"p":{"lines":[29,30]},"v":"ref / <code>$refs</code>"},{"t":"heading","d":4,"p":{"lines":[33,34]},"v":"<code>$parent</code> / <code>$children</code>","c":[{"t":"list_item","d":6,"p":{"lines":[35,36],"index":1},"v":"1. parent访问父组件的实例，根组件#app上拿$parent得到的是new Vue()的实例"},{"t":"list_item","d":6,"p":{"lines":[36,37],"index":2},"v":"2. children则是访问子组件的实例，但是有以下缺陷","c":[{"t":"list_item","d":8,"p":{"lines":[37,38],"index":1},"v":"1. 不能保证顺序"},{"t":"list_item","d":8,"p":{"lines":[38,39],"index":2},"v":"2. 访问的数据也不是响应式的"},{"t":"list_item","d":8,"p":{"lines":[39,40],"index":3},"v":"3. 最底层的子组件拿$children是个空数组"}]}]},{"t":"heading","d":4,"p":{"lines":[43,44]},"v":"<code>$attrs</code> / <code>$listeners</code>","c":[{"t":"ordered_list","d":5,"p":{"lines":[45,48],"start":1},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[45,46],"index":1},"v":"1. attrs继承所有的父组件属性（除了prop传递的属性、class 和 style ），一般用于子组件元素上"},{"t":"list_item","d":6,"p":{"lines":[46,47],"index":2},"v":"2. listener属性是一个对象，里面包含了作用在这个组件上的所有监听器"}]},{"t":"fence","d":5,"v":"<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- 将其父组件属性和监听直接传递给其子组件child --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>child</span> <span class=\"token attr-name\">v-bind</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$attrs<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">v-on</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$listeners<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>child</span><span class=\"token punctuation\">></span></span>\n</code></pre>\n"}]},{"t":"heading","d":4,"p":{"lines":[55,56]},"v":"eventBus（ <code>$emit</code> / <code>$on</code> ）","c":[{"t":"list_item","d":6,"p":{"lines":[57,58],"index":1},"v":"1. 创建一个文件，内部创建一个Vue的实例化，组件触发该实例的emit和on对事件进行订阅和触发"},{"t":"list_item","d":6,"p":{"lines":[58,59],"index":2},"v":"2. 但是项目过大，这个方式维护困难"}]},{"t":"heading","d":4,"p":{"lines":[62,63]},"v":"Vuex"}]},{"t":"heading","d":3,"p":{"lines":[66,67]},"v":"组件通信总结","c":[{"t":"heading","d":4,"p":{"lines":[68,69]},"v":"父子间","c":[{"t":"list_item","d":6,"p":{"lines":[70,71],"index":1},"v":"1. props / <code>$emit</code>"},{"t":"list_item","d":6,"p":{"lines":[71,72],"index":2},"v":"2. ref / <code>$refs</code>"},{"t":"list_item","d":6,"p":{"lines":[72,73],"index":3},"v":"3. provide / inject（更多用于祖孙间）"},{"t":"list_item","d":6,"p":{"lines":[73,74],"index":4},"v":"4. <code>$parent</code> / <code>$children</code>"}]},{"t":"heading","d":4,"p":{"lines":[75,76]},"v":"兄弟间","c":[{"t":"list_item","d":6,"p":{"lines":[77,78],"index":1},"v":"1. eventBus"},{"t":"list_item","d":6,"p":{"lines":[78,79],"index":2},"v":"2. <code>$parent</code> / <code>$refs</code>"}]},{"t":"heading","d":4,"p":{"lines":[80,81]},"v":"全局","c":[{"t":"list_item","d":6,"p":{"lines":[82,83],"index":1},"v":"1. eventBus"},{"t":"list_item","d":6,"p":{"lines":[83,84],"index":2},"v":"2. vuex"}]}]}]},{"t":"heading","d":2,"p":{"lines":[85,86]},"v":"事件修饰符","c":[{"t":"list_item","d":4,"p":{"lines":[87,88],"index":1},"v":"1. .stop：等价于event.stopPropagation()，阻止冒泡"},{"t":"list_item","d":4,"p":{"lines":[88,89],"index":2},"v":"2. .prevent：等价于event.preventDefault()，阻止默认行为"},{"t":"list_item","d":4,"p":{"lines":[89,90],"index":3},"v":"3. .capture：捕获触发"},{"t":"list_item","d":4,"p":{"lines":[90,91],"index":4},"v":"4. .self：只有自身范围事件触发，子元素不触发"},{"t":"list_item","d":4,"p":{"lines":[91,92],"index":5},"v":"5. .once：只触发一次"}]},{"t":"heading","d":2,"p":{"lines":[93,94]},"v":"指令","c":[{"t":"heading","d":3,"p":{"lines":[95,96]},"v":"v-if、v-show、v-html","c":[{"t":"heading","d":4,"p":{"lines":[97,98]},"v":"原理比较","c":[{"t":"list_item","d":6,"p":{"lines":[99,100],"index":1},"v":"1. v-if：调用addIfCondition，vnode生成时会忽略"},{"t":"list_item","d":6,"p":{"lines":[100,101],"index":2},"v":"2. v-show：vnode时会生成，render会增加display为none"},{"t":"list_item","d":6,"p":{"lines":[101,102],"index":3},"v":"3. v-html：移除下面所有节点，addProps添加innerHTML属性"}]},{"t":"heading","d":4,"p":{"lines":[103,104]},"v":"v-if与v-show区别","c":[{"t":"list_item","d":6,"p":{"lines":[105,106],"index":1},"v":"1. 实现原理: 见上"},{"t":"list_item","d":6,"p":{"lines":[106,107],"index":2},"v":"2. 编译过程：v-if具有局部编译和卸载的过程，组件会销毁和重建，v-show只是简单css切换"},{"t":"list_item","d":6,"p":{"lines":[107,108],"index":3},"v":"3. 编译条件：v-if只在条件为真编译，v-show任何条件都会编译"},{"t":"list_item","d":6,"p":{"lines":[108,109],"index":4},"v":"4. 性能消耗：v-if的切换代价更高，v-show更适合频繁切换"},{"t":"list_item","d":6,"p":{"lines":[109,110],"index":5},"v":"5. 使用场景：可以用v-show的情况v-show优先"}]}]},{"t":"heading","d":3,"p":{"lines":[111,112]},"v":"v-model","c":[{"t":"fence","d":4,"v":"<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- v-bind和v-on的语法糖，等价于 --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>child</span> <span class=\"token attr-name\">:value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>message<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">@input</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>function(e){message = e}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>child</span><span class=\"token punctuation\">></span></span>\n</code></pre>\n"},{"t":"ordered_list","d":4,"p":{"lines":[118,121],"start":1},"v":"","c":[{"t":"list_item","d":5,"p":{"lines":[118,119],"index":1},"v":"1. 但是单选框、复选框等控件，触发的不是input事件"},{"t":"list_item","d":5,"p":{"lines":[119,120],"index":2},"v":"2. vue提供了model属性处理这个情况"}]},{"t":"fence","d":4,"v":"<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token literal-property property\">model</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">prop</span><span class=\"token operator\">:</span> <span class=\"token string\">'checked'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">event</span><span class=\"token operator\">:</span> <span class=\"token string\">'change'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</code></pre>\n"}]}]},{"t":"heading","d":2,"p":{"lines":[128,129]},"v":"使用技巧","c":[{"t":"heading","d":3,"p":{"lines":[130,131]},"v":"vue初始化页面闪动","c":[{"t":"ordered_list","d":4,"p":{"lines":[134,136],"start":1},"v":"","c":[{"t":"list_item","d":5,"p":{"lines":[134,135],"index":1},"v":"1. 添加样式"}]},{"t":"fence","d":4,"v":"<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\"><span class=\"token attribute\"><span class=\"token punctuation\">[</span><span class=\"token attr-name\">v-cloak</span><span class=\"token punctuation\">]</span></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n"},{"t":"ordered_list","d":4,"p":{"lines":[142,144],"start":2},"v":"","c":[{"t":"list_item","d":5,"p":{"lines":[142,143],"index":2},"v":"2. 根元素添加元素"}]},{"t":"fence","d":4,"v":"<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">display</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span> <span class=\"token attr-name\">:style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{display: <span class=\"token punctuation\">'</span>block<span class=\"token punctuation\">'</span>}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n</code></pre>\n"}]},{"t":"heading","d":3,"p":{"lines":[148,149]},"v":"如何保存当前页面状态","c":[{"t":"heading","d":4,"p":{"lines":[150,151]},"v":"组件会被卸载","c":[{"t":"ordered_list","d":5,"p":{"lines":[152,156],"start":1},"v":"","c":[{"t":"list_item","d":6,"p":{"lines":[152,153],"index":1},"v":"1. 将状态存储在LocalStorage / SessionStorage"},{"t":"list_item","d":6,"p":{"lines":[153,154],"index":2},"v":"2. 组件卸载前，将当前状态存放至本地存储"},{"t":"list_item","d":6,"p":{"lines":[154,155],"index":3},"v":"3. 组件重新展示时，判断本地存储是否存在决定如何加载"}]},{"t":"heading","d":5,"p":{"lines":[156,157]},"v":"优缺点","c":[{"t":"list_item","d":7,"p":{"lines":[158,159],"index":1},"v":"1. 兼容性好"},{"t":"list_item","d":7,"p":{"lines":[159,160],"index":2},"v":"2. JSON深拷贝的缺点：通过JSON方法存储，部分数据会丢失或不一致"},{"t":"list_item","d":7,"p":{"lines":[160,161],"index":3},"v":"3. 其他页面进入A页面同样会加载数据，而不是回退的时候"}]}]},{"t":"heading","d":4,"p":{"lines":[162,163]},"v":"组件不会卸载","c":[{"t":"list_item","d":6,"p":{"lines":[164,165],"index":1},"v":"1. keep-alive包裹的组件在切换时，activated、deactivated这两个生命周期钩子函数会被执行，会保留组件状态"},{"t":"list_item","d":6,"p":{"lines":[165,166],"index":2},"v":"2. 使用方式就是利用keep-alive包裹router-view，利用路由的meta配置keepAlive属性决定是否进行缓存"}]}]}]}]})</script>
</body>
</html>
